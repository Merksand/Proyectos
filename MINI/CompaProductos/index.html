<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Tienda de vestir</h1>
    <div>Productos disponibles:<p class="disponibles" style="color:green; font-weight: bolder;"> </p>
    </div>
    <div>
        <p>Ingrese nombre del Producto: <input type="text" name="" id="producto"></p>
        <p>Ingrese la cantidad: <input type="text" id="cantidadProducto"></p>
        <button id="botonCalcular">Calcular</button>
        <p>Precio Total:
        <p id="precioTotal"></p>
        </p>

        <form id="nuevoProductoForm">
            <label for="nombre">Nombre del Producto:</label>
            <input type="text" id="nombre" required><br>

            <label for="precio">Precio:</label>
            <input type="number" id="precio" required><br>

            <label for="stock">Stock:</label>
            <input type="number" id="stock" required><br>

            <button type="submit">Agregar Producto</button>
        </form>

    </div>

    <script>
        let disponibles = document.querySelector(".disponibles")
        let producto = document.getElementById("producto")
        let cantidadProducto = document.getElementById("cantidadProducto")
        let precioTotal = document.getElementById("precioTotal")
        let botonCalcular = document.getElementById("botonCalcular")

        class Producto {
            static productosConteo = 0
            static id = 0
            static productosAgregadosTienda = []
            constructor(nombre, precio, stock, id) {
                this.nombre = nombre
                this.precio = precio
                this.stock = stock
                Producto.productosConteo++
                this.id = Producto.id++
                Producto.productosAgregadosTienda.push(this.nombre)
            }
        }
        class Carrito {
            constructor() {
                this.listaProductos = []
                this.costoTotal = 0
            }
            agregarProducto(producto, stock = 1) {
                for (let i = 0; i < stock; i++) {
                    this.listaProductos.push(producto)
                }
            }
            calcularTotal() {
                return this.listaProductos.reduce((total, producto) => total + producto.precio, 0)
            }
            realizarCompra() {
                this.listaProductos.forEach(e => {
                    e.stock--
                });
                return `Gracias por la compra`
            }
        }


        const carrito1 = new Carrito()
        const productos = [
            new Producto("Reloj", 200, 30, Producto.id),
            new Producto("Polera", 60, 20, Producto.id),
            new Producto("Pantalon", 120, 30, Producto.id),
            new Producto("Gorra", 40, 50, Producto.id),
            new Producto("Gafas", 20, 20, Producto.id)]
        let totalDisponibles = ""
        for (let i = 0; i < Producto.productosConteo; i++) {
            console.log(i);
            console.log(Producto.productosAgregadosTienda[i]);
            disponibles.innerHTML += Producto.productosAgregadosTienda[i] + " "
        }
        // console.log(producto0);
        // console.log(Producto.id);
        // for (let i = 0; i < Producto.productosConteo;i++) {
        //     console.log(i);
        //         carrito1.agregarProducto(productos[i])            
        //     }
        // carrito1.agregarProducto(producto0)
        // console.log(carrito1.listaProductos); 
        console.log("---------------------");
        console.log(Producto.productosAgregadosTienda[0]);
        console.log(productos[0].nombre);

        botonCalcular.addEventListener("click", () => {
            for (let i = 0; i < Producto.productosConteo; i++) {
                if (producto.value == productos[i].nombre) {
                    carrito1.agregarProducto(productos[i]  , cantidadProducto.value)
                }
                console.log(carrito1.calcularTotal());
                precioTotal.innerHTML = carrito1.calcularTotal()
            }
            console.log(carrito1.listaProductos);
            // console.log(carrito1.listaProductos);
            // console.log(carrito1.calcularTotal());
        })

        // botonCalcular.addEventListener("click", ()=>{
        //     console.log(3);
        // })
        // function calcularTotal(){
        //     console.log(3);
        // }


        document.getElementById('nuevoProductoForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Evita que el formulario se env√≠e de forma tradicional

            const nombre = document.getElementById('nombre').value;
            const precio = parseFloat(document.getElementById('precio').value);
            const stock = parseInt(document.getElementById('stock').value);

            const nuevoProducto = new Producto(nombre, precio, stock, Producto.id);
            productos.push(nuevoProducto);

            // Limpia los campos del formulario
            document.getElementById('nombre').value = '';
            document.getElementById('precio').value = '';
            document.getElementById('stock').value = '';

            // Actualiza la lista de productos disponibles
            actualizarProductosDisponibles();
        });
        function actualizarProductosDisponibles() {
            disponibles.innerHTML = '';
            for (let i = 0; i < productos.length; i++) {
                disponibles.innerHTML += productos[i].nombre + " ";
            }
        }



    </script>
</body>

</html>